<template>
    <div class="stencil-container">
        <a title="矩形" class="stencil" data-type="rectNodeComponent" @mousedown.stop="startDrag">
            <svg width="62" height="62">
                <use href="#rectNodeComponent" />
            </svg>
            <div>矩形</div>
        </a>
        <a title="多边形" class="stencil" data-type="polygonNodeComponent" @mousedown.stop="startDrag">
            <svg width="62" height="62">
                <use href="#polygonNodeComponent" />
            </svg>
            <div>多边形</div>
        </a>
        <a title="椭圆" class="stencil" data-type="ellipseNodeComponent" @mousedown.stop="startDrag">
            <svg width="62" height="62">
                <use href="#ellipseNodeComponent" />
            </svg>
            <div>椭圆</div>
        </a>

        <a title="心形" class="stencil" data-type="heartNodeComponent" @mousedown.stop="startDrag">
            <svg width="62" height="62">
                <use href="#heartNodeComponent" />
            </svg>
            <div>心形</div>
        </a>

        <a title="星星" class="stencil" data-type="starNodeComponent" @mousedown.stop="startDrag">
            <svg width="62" height="62">
                <use href="#starNodeComponent" />
            </svg>
            <div>星星</div>
        </a>

        <a title="音乐" class="stencil" data-type="MusicNodeComponent" @mousedown.stop="startDrag">
            <svg width="62" height="62">
                <use href="#MusicNodeComponent" />
            </svg>
            <div>音乐</div>
        </a>
    </div>
    <svg style="display: none;">
        <symbol id="rectNodeComponent" viewBox="0 0 60 60">
            <rect fill="#EFF4FF" stroke="#5F95FF" stroke-width="1" width="60" height="60" />
        </symbol>

        <symbol id="polygonNodeComponent" viewBox="0 0 62 62">
            <polygon
                fill="#EFF4FF"
                stroke="#5F95FF"
                stroke-width="1"
                points="0, 30 30, 0 60, 30 30, 60"
            />
        </symbol>

        <symbol id="ellipseNodeComponent" viewBox="0 0 62 62">
            <ellipse
                fill="#EFF4FF"
                stroke="#5F95FF"
                stroke-width="1"
                cx="31"
                cy="31"
                rx="30"
                ry="30"
            />
        </symbol>

        <symbol id="heartNodeComponent" viewBox="-1 -1 62 62">
            <path
                fill="#EFF4FF"
                stroke="#5F95FF"
                stroke-width="1"
                d="M 29.81999542845532 10.604347826086958 C 32.2440569919236 4.356521739130435 37.77619749072991 0 44.208360847259605 0 C 52.87258089094325 0 59.12473967592827 8.060869565217391 59.90475948595518 17.66086956521739 C 59.90475948595518 17.66086956521739 60.32477015289276 20.047826086956523 59.4007466856301 24.33913043478261 C 58.128714380047725 30.182608695652178 55.14063849240615 35.38695652173913 51.12053639457509 39.35217391304348 L 29.81999542845532 60 L 8.879463605424897 39.339130434782604 C 4.8593615075938414 35.38695652173913 1.8712856199522525 30.182608695652178 0.5992533143698887 24.33913043478261 C -0.3247701528927718 20.047826086956523 0.09524051404480113 17.66086956521739 0.09524051404480113 17.66086956521739 C 0.8752603240717222 8.060869565217391 7.127419109056737 0 15.791639152740384 0 C 22.223802509270072 0 27.39593386498704 4.356521739130435 29.81999542845532 10.604347826086958 Z"
            />
        </symbol>

        <symbol id="starNodeComponent" viewBox="-1 -1 62 62">
            <path
                fill="#EFF4FF"
                stroke="#5F95FF"
                stroke-width="1"
                d="M 32.90200084356501 1.8846423858037296 L 39.660147646254224 16.215777194519582 C 40.135720939776796 17.210449564804886 41.049322266807 17.904102665135426 42.100589547225326 18.061156197285737 L 57.23132933324617 20.36460800215696 C 59.88452770763528 20.7703296268786 60.935794988053594 24.173156156801994 59.02098672729165 26.123237514335024 L 48.0702858896008 37.287126091352945 C 47.306865602630346 38.072393752104496 46.95644317582425 39.18485627150253 47.14416947589895 40.284230996554705 L 49.72227733025816 56.04193538896922 C 50.17282045043745 58.803459995945516 47.40698629600353 60.91059488562886 45.0416349150623 59.60181545104294 L 31.500311136340585 52.16794826259489 C 30.56167963596708 51.64443648876052 29.435321835518877 51.64443648876052 28.496690335145374 52.16794826259489 L 14.955366556423652 59.60181545104294 C 12.590015175482428 60.91059488562886 9.824181021048506 58.803459995945516 10.27472414122779 56.04193538896922 L 12.852831995587007 40.284230996554705 C 13.04055829566171 39.18485627150253 12.690135868855602 38.05930595775864 11.926715581885151 37.287126091352945 L 0.9760147441942952 26.123237514335024 C -0.9387935165676489 24.173156156801994 0.1249888505223201 20.7703296268786 2.7656721382397724 20.36460800215696 L 17.896411924260626 18.061156197285737 C 18.960194291350597 17.904102665135426 19.861280531709156 17.210449564804886 20.33685382523173 16.215777194519582 L 27.10751571459259 1.8846423858037296 C 28.283933861727384 -0.6282141286012431 31.713067609758575 -0.6282141286012431 32.90200084356501 1.8846423858037296 Z"
            />
        </symbol>

        <symbol id="MusicNodeComponent" viewBox="-1 -1 62 62">
            <path
                fill="#EFF4FF"
                stroke="#5F95FF"
                stroke-width="1"
                d="M 59.592 0.2725589469997026 C 59.34 0.06486835768656107 58.992000000000004 -0.033511395145979665 58.644000000000005 0.01021293944626066 L 21.443999999999996 4.393577482318353 C 20.855999999999998 4.459163984206715 20.4 4.929200581073298 20.4 5.475754763476302 L 20.4 12.056267119608473 L 20.4 16.658253335441767 L 20.4 45.11186407134217 C 18.324 42.93657842537821 15.072000000000001 41.537399718426514 11.4 41.537399718426514 C 5.112 41.537399718426514 0 45.66934933739323 0 50.76323431738922 C 0 55.868050381033285 5.112 59.99999999999999 11.4 59.99999999999999 C 17.700000000000003 59.99999999999999 22.8 55.868050381033285 22.8 50.76323431738922 C 22.8 50.402508557003245 22.776 50.052713880265316 22.727999999999998 49.69198811987934 C 22.776 49.58267728339874 22.8 49.451504279622014 22.8 49.32033127584529 L 22.8 17.620188696471054 L 57.599999999999994 13.510101244800463 L 57.599999999999994 34.18078042328208 C 55.524 32.01642586096618 52.272 30.606316070366432 48.6 30.606316070366432 C 42.312000000000005 30.606316070366432 37.199999999999996 34.73826568933315 37.199999999999996 39.83215066932914 C 37.199999999999996 44.936966732973204 42.312000000000005 49.06891635193991 48.6 49.06891635193991 C 54.9 49.06891635193991 60 44.936966732973204 60 39.83215066932914 C 60 39.7337709164966 59.988 39.63539116366406 59.988 39.537011410831525 C 59.988 39.5151492435354 60 39.482355992591216 60 39.4604938252951 L 60 12.274888792569675 L 60 7.672902576736378 L 60 1.0923902206042089 C 60 0.7753887948104664 59.856 0.4802495363128442 59.592 0.2725589469997026 Z"
            />
        </symbol>
    </svg>
</template>

<script setup>
import { nextTick } from "vue";
import BaseGraph from "../baseGraph";
import { Addon } from "@antv/x6";

let dnd
nextTick(() => {
    const { Dnd } = Addon
    dnd = new Dnd({
        target: BaseGraph.graph,
    })
});
function startDrag(e) {
    let target = e.target.closest('.stencil')
    const type = target.getAttribute('data-type')
    let { ...obj } = BaseGraph.getCompontent()
    const node = obj[type]
    dnd.start(node, e)
}


</script>
<style scoped  lang="scss">
.stencil-container {
    padding: 20px 0;
    width: 100%;
    text-align: center;
    color: #999;
    .stencil {
        cursor: move;
        text-align: center;
        display: block;
        margin-bottom: 20px;
    }
    .stencil:hover {
        color: #409eff;
    }
}
</style>